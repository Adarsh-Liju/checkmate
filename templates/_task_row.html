{{ define "_task_row.html" }}
  <div>
    {{ if not .Tasks }}
      <div class="center-align grey-text" style="margin:2rem 0;">
        <i class="material-icons large" style="opacity:0.3;">check_circle_outline</i>
        <div style="font-size:1.1rem;margin-top:0.5rem;">No tasks yet. Add your first task!</div>
      </div>
    {{ end }}
    {{ range .Tasks }}
      <div class="card z-depth-1" style="border-radius:12px;margin-bottom:1.2rem;">
        <div class="card-content" style="padding-bottom:0.7rem;">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:1rem;">
            <div style="flex:1;min-width:0;">
              <span class="card-title" style="font-size:1.15rem;font-weight:500;word-break:break-word;">{{ .Title }}</span>
              {{ if eq .Status "done" }}
                <span class="new badge green" data-badge-caption="done" style="margin-left:0.5rem;"></span>
              {{ else if eq .Status "in_progress" }}
                <span class="new badge yellow black-text" data-badge-caption="in progress" style="margin-left:0.5rem;"></span>
              {{ else }}
                <span class="new badge blue lighten-2 white-text" data-badge-caption="pending" style="margin-left:0.5rem;"></span>
              {{ end }}
              {{ if .Description }}
                <div class="grey-text text-darken-1" style="margin-top:0.3rem;font-size:1rem;word-break:break-word;">{{ .Description }}</div>
              {{ end }}
              <div class="grey-text" style="font-size:0.93rem;margin-top:0.5rem;">
                <i class="material-icons tiny" style="vertical-align:middle;">event</i>
                Created: {{ .CreatedAt.Format "2006-01-02 15:04" }}
                {{ if .DueDate }}
                  &nbsp;â€¢&nbsp;<i class="material-icons tiny" style="vertical-align:middle;">schedule</i> Due: {{ formatDate .DueDate }}
                {{ end }}
              </div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:flex-end;gap:0.5rem;">
              {{ if ne .Status "done" }}
                <form action="/complete/{{ .ID }}" method="post" style="margin:0;">
                  <button class="btn-small green waves-effect waves-light" type="submit" title="Mark as done">
                    <i class="material-icons left" style="font-size:1.1rem;">check</i>Done
                  </button>
                </form>
              {{ end }}
              <form action="/delete/{{ .ID }}" method="post" style="margin:0;" onsubmit="return confirm('Delete this task?')">
                <button class="btn-small btn-flat red-text" type="submit" title="Delete task">
                  <i class="material-icons left" style="font-size:1.1rem;">delete</i>Delete
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    {{ end }}
  </div>
{{ end }}
